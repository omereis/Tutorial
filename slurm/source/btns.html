<HTML>
<HEAD><TITLE>Buttons</TITLE>
<SCRIPT type="text/javascript">
//----------------------------------------------------------------------------
/*
*/
function handleFileSelect(evt) {
   var files = evt.target.files; // FileList object

    // files is a FileList of File objects. List some properties.
   var output = [];
   ouput.push(files.size);
    for (var i = 0, f; f = files[i]; i++) {
      output.push('<li><strong>', escape(f.name), '</strong> (', f.type || 'n/a', ') - ',
                  f.size, ' bytes, last modified: ',
                  f.lastModifiedDate ? f.lastModifiedDate.toLocaleDateString() : 'n/a',
                  '</li>');
    }
  document.getElementById('files_list').innerHTML = '<ul>' + output.join('') + '</ul>';
}
//----------------------------------------------------------------------------
function handleButtonClick(evt) {
   var files = evt.target.files; // FileList object
  alert (document.getElementById('files_list').nodeValue)
}
  document.getElementById('files').addEventListener('change', handleFileSelect, false);
  document.getElementById('file_btn').addEventListener('change', handleButtonClick, false);
//----------------------------------------------------------------------------
function HandleBrowseClick()
{
    var fileinput = document.getElementById("browse");
    fileinput.click();
}
//----------------------------------------------------------------------------
function Handlechange()
{
  var fileinput = document.getElementById("browse");
  var textinput = document.getElementById("filename");
  textinput.value = fileinput.value;
}
//----------------------------------------------------------------------------
function set_radio_value(form, value)
{
  var f;

  for (var i=0; i < form.length; i++) {
    f = form[i].value == parseInt(value);
    form[i].checked = f;
  }
}
//----------------------------------------------------------------------------
function addDoc()
{
  var file=document.getElementById("myFile").files[0]; //for input type=file
  var reader = new FileReader();

// If we use onloadend, we need to check the readyState.
  reader.onloadend = function(evt) {
    if (evt.target.readyState == FileReader.DONE) { // DONE == 2
        lines = evt.target.result;

        try {
          var str, strCell, strHtml, strName;
          var arr = new Uint8Array(lines);
          strName = strCell = "";
          strHtml='<table border="2" style="table-layout:fixed;" width="80%"><tr>';
          str = String.fromCharCode.apply(String, arr);
          for (var n=0 ; n < str.length ; n++) {
            if (str[n] == "=") {
              if (strCell.trim() == "ControlMachine") {
                strName = "control_machine";
              }
              else if (strCell.trim() == "ReturnToService") {
                strName = "return_to_service";
              }
              strCell = "";
            }
            else if (str.charCodeAt(n) == 13) { // new line
              if (strName == "control_machine") {
                document.getElementsByName(strName)[0].value = strCell;
              }
              else if (strName == "return_to_service") {
                set_radio_value(document.getElementsByName(strName), strCell)
/*
                var f, frm = document.getElementsByName(strName);//[0];//.checked = 1;
                for (var i=0 ; i < frm.length ; i++) {
                  f = (frm[i].value == parseInt(strCell));
                  frm[i].checked = f;
                }
*/
              }
              strHtml += "</tr>" + strCell + "</td><tr>";
              strCell = "";
              strName = "";
              lines++;
            }
            else {
              strCell += str[n];
            }
          }
          strHtml += "</tr></table>";
        }
        catch (e) {
          alert (e);
        }
      }
    }

//  reader.readAsText(file);
  reader.readAsArrayBuffer(file);
}
//----------------------------------------------------------------------------
</SCRIPT>
<!-- <div style='visibility:hidden;text-align:left;background:#ccc;border:1px solid black;position: absolute;left:100;z-index:1;padding:5;' id='out_box'></div> -->
</HEAD>
<BODY onload>

<table border="0" style="width:100%;">
  <tr>
    <td align="center"><button type="button" id="btnLoad"   onclick="alert('Load')">Load...</button></td>
    <td align="center"><button type="button" id="btnSave"   onclick="alert('Save!')">Save</button></td>
    <td align="center"><button type="button" id="btnSaveAs" onclick="alert('Save As')">Save As...</button></td>
  </tr>
</table>

<input type="file" id="myFile">
<button type="button" onclick="addDoc()">Add Document</button>
<p id="DisplayText"></p>


<H2>Control Machines</H2>
Define the hostname of the computer on which the Slurm controller and
optional backup controller will execute. You can also specify addresses
of these computers if desired (defaults to their hostnames).
The IP addresses can be either numeric IP addresses or names.
Hostname values should not be the fully qualified domain
name (e.g. use <I>tux</I> rather than <I>tux.abc.com</I>).
<P>
<input type="text" name="control_machine" id = "17" value="linux0"> <B>ControlMachine</B>:
Master Controller Hostname
<P>
<input type="text" name="control_addr"> <B>ControlAddr</B>: Master Controller
Address (optional)
<P>
<input type="text" name="backup_controller"> <B>BackupController</B>: Backup
Controller Hostname (optional)
<P>
<input type="text" name="backup_addr"> <B>BackupAddr</B>: Backup Controller
Address (optional)
<P>

  <H2>State Preservation</H2>
  Define the location of a directory where the slurmctld daemon saves its state.
  This should be a fully qualified pathname which can be read and written to
  by the Slurm user on both the control machine and backup controller (if configured).
  The location of a directory where slurmd saves state should also be defined.
  This must be a unique directory on each compute server (local disk).
  The use of a highly reliable file system (e.g. RAID) is recommended.
  <P>
  <input type="text" name="state_save_location" value="/var/spool"> <B>StateSaveLocation</B>:
  Slurmctld state save directory <B>Must be writable by both ControlMachine and BackupController</B>
  <P>
  <input type="text" name="slurmd_spool_dir" value="/var/spool/slurmd"> <B>SlurmdSpoolDir</B>:
  Slurmd state save directory
  <P>
  Define when a non-responding (DOWN) node is returned to service.<BR>
  Select one value for <B>ReturnToService</B>:<BR>
  <input type="radio" name="return_to_service" value="0">
  <B>0</B>: When explicitly restored to service by an administrator.<BR>
  <input type="radio" name="return_to_service" value="1" checked>
  <B>1</B>:Upon registration with a valid configuration only if it was set DOWN
  due to being non-responsive.<BR>
  <input type="radio" name="return_to_service" value="2">
  <B>2</B>:Upon registration with a valid configuration.<BR>
  <P>
  
    <div id="file_content"></div>


</BODY>
